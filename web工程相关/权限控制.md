权限控制问题
一般地，前端页面的权限控制有以下几个方面：
+ 菜单权限，根据不同权限显示不同的菜单
+ 操作权限，比如有些账号没有新增权限， 有些没有修改或者删除权限
+ 数据权限，比如统计概况， 普通管理员不能看到公司营业概况，但能看到自己所属区域的概况
+ 显示权限，比如列表， 运营能看到那一列的签约金额，但市场不能看到签约金额这一列
而一卡通系统页面的权限控制，主要有菜单权限、操作权限。菜单权限功能，主要是管理端控制用户界面视图权限，展示本地所有视图菜单，用户操作视图菜单，保存操作(定义菜单权限)；绑定用户菜单权限，刷新页面，获得绑定的视图菜单。操作权限，是指页面上新增、删除、编辑等操作权限的控制。
需要考虑问题点有以下几点：
+ 动态更新用户权限
+ 权限数据与后端的交互
+ 跨页面的权限控制
动态更新用户权限，是当用户登录时、管理员修改用户权限后，用户的权限视图应当相应的改变。
权限数据与后端的交互，需要定义权限控制数据格式，后端如何处理权限数据。
跨页面的权限控制，需要考虑的是当用户通过url跳转到另一页面路由时，应当及时判断用户是否有该页面路由的权限。例如：用户从管理端跳转到自助端的查账页面时，需要判断权限。
权限控制解决方案
菜单权限
Vue框架中vue-router库提供了beforeEach方法(https://router.vuejs.org/zh-cn/api/router-instance.html#methods),控制用户视图路由。当用户访问视图时，判断该用户是否拥有该视图权限，否则做出相应的提示并跳转为授权页面。该部分权限控制逻辑代码，如下图所示。
[](images/quanxian1.png)
操作权限
用户的操作权限，需要在渲染页面的时候执行判断该页面上的操作用户是否拥有权限并做出权限的限制。在vue-router库中路由信息对象有个mete字段用来自定义属性使用，因此，可利用该字段增加该页面控制权限的描述信息。当页面渲染时，获取该字段信息，限制页面元素的动作行为。具体实现步骤，如下所示。
①   mete字段增加操作权限的描述
[](images/quanxian2.png)
②   添加全局页面权限预处理方法
[](images/quanxian3.png)
③   页面上增加权限限制的预处理
[](images/quanxian4.png)
    
参考链接
http://www.cnblogs.com/refined-x/p/7446951.html
https://segmentfault.com/q/1010000008137883
http://refined-x.com/2017/09/01/%E7%94%A8addRoutes%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/
https://cn.vuejs.org/v2/guide/custom-directive.html
